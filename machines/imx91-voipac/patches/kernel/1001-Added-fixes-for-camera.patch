From 6d491e27ab5819f8aa23310d74cf0704c4cc60fd Mon Sep 17 00:00:00 2001
From: Marek Belisko <marek.belisko@gmail.com>
Date: Wed, 2 Jul 2025 14:57:27 +0200
Subject: [PATCH] Added fixes for camera

Signed-off-by: Marek Belisko <marek.belisko@gmail.com>
---
 .../boot/dts/freescale/imx93-voipac-evk.dts   | 21 ++++++++++++-------
 1 file changed, 14 insertions(+), 7 deletions(-)

diff --git a/arch/arm64/boot/dts/freescale/imx93-voipac-evk.dts b/arch/arm64/boot/dts/freescale/imx93-voipac-evk.dts
index 4bbf2e161b8f..1088c6df8598 100644
--- a/arch/arm64/boot/dts/freescale/imx93-voipac-evk.dts
+++ b/arch/arm64/boot/dts/freescale/imx93-voipac-evk.dts
@@ -356,15 +356,21 @@ ov5640_mipi2: ov5640_mipi2@3c {
                compatible = "ovti,ov5640";
                reg = <0x3c>;
                status = "okay";
-               clocks = <&clk IMX93_CLK_DUMMY>;
+               clocks = <&clk IMX93_CLK_CCM_CKO3>;
+               assigned-clocks = <&clk IMX93_CLK_CCM_CKO3>;
+      		   assigned-clock-rates = <27000000>;
                clock-names = "xclk";
-               csi_id = <1>;
+               csi_id = <0>;
                DOVDD-supply = <&csi2_reg>; /* 1.8v */
-               mclk = <12000000>;
+               mclk = <24000000>;
                mclk_source = <0>;
+               mipi_csi;
                port {
-                       ov5640_mipi2_ep: endpoint {
+                       ov5640_mipi_ep: endpoint {
                                remote-endpoint = <&mipi_csi_ep>;
+                               data-lanes = <2>;
+              				   cfg-clk-range = <28>;
+                 			hs-clk-range = <0x7>;
                        };
                };
        };
@@ -389,12 +395,13 @@ cap_device {
 &mipi_csi {
 	status = "okay";
 
-	port {
+	port@0 {
+        reg = <0>;
 		mipi_csi_ep: endpoint {
-			remote-endpoint = <&ov5640_mipi2_ep>;
+			remote-endpoint = <&ov5640_mipi_ep>;
 			data-lanes = <2>;
 			cfg-clk-range = <28>;
-			hs-clk-range = <0x2b>;
+			hs-clk-range = <0x7>;
 			bus-type = <4>;
 		};
 	};
-- 
2.25.1

